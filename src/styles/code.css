.prose {
	& code[class*='language-'],
	& pre[class*='language-'] {
		@apply bg-surface-variant px-0 text-left text-label-large;
		white-space: pre;
		word-spacing: normal;
		word-break: normal;
		word-wrap: normal;
		tab-size: 4;
		hyphens: none;
		font-family: 'Fira Code', monospace;
	}

	& :not(pre) > code[class*='language-'] {
		white-space: normal;
		border-radius: 0.2em;
		padding: 0.1em;
	}

	& pre > code {
		counter-reset: step;
		counter-increment: step 0;
	}

	& pre {
		@apply relative my-2 mx-0 py-5 px-4 rounded-md border-t-0 overflow-x-auto;
		& .code-line {
			@apply px-4;

			&.inserted {
				@apply bg-primary-container block;
			}

			&.deleted {
				@apply bg-error block;
			}
		}

		& .line-number {
			@apply pl-4;

			&::before {
				@apply mr-4 py-0 px-4 w-4 text-secondary inline-block -ml-2 text-left;
				content: counter(step);
				counter-increment: step;
			}
		}
	}

	& kbd {
		@apply p-1 text-error border border-primary;
	}

	& .rehype-code-title {
		@apply flex justify-between pb-0 text-on-surface-variant bg-surface-variant;
		border-top: 1px solid var(--clr-code-border);
		border-left: 1px solid var(--clr-code-border);
		border-bottom: none;
		border-top-left-radius: var(--rounded-20);
		border-top-right-radius: var(--rounded-20);
		z-index: 1;
	}

	& .highlight-line {
		@apply bg-secondary/20 border-l-2 block;
	}

	& [class*='language-'] .namespace {
		@apply opacity-[0.7];
	}
}

.token.atrule,
.token.boolean,
.token.constant,
.token.function,
.token.keyword,
.token.operator,
.token.property,
.token.pseudo-class,
.token.pseudo-element,
.token.symbol,
.token.tag,
.token.url,
.token.variable {
	color: var(--color-purple);
}

.token.attr-name,
.token.builtin,
.token.class {
	color: var(--color-yellow);
}

.token.attr-value,
.token.attribute,
.token.char,
.token.inserted,
.token.string {
	color: var(--color-green);
}

.token.cdata,
.token.comment,
.token.doctype,
.token.prolog {
	color: var(--color-gray);
}

.token.deleted,
.token.entity,
.token.selector {
	color: var(--color-red);
}

.token.class-name,
.token.hexcode,
.token.important,
.token.regex {
	color: var(--color-yellow2);
}

.token.number,
.token.unit {
	color: var(--color-orange);
}

.token.punctuation {
	color: var(--color-blue);
}

.token.id,
.token.important {
	font-weight: bold;
}
